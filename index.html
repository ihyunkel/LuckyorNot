<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃูุช ูุญุธู - ูุนุจุฉ ุชูุงุนููุฉ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="background-pattern"></div>
    
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="logo-container">
                <div class="logo-circle">
                    <img src="logo.png" alt="Logo" class="logo-image" id="logoImage" onerror="this.src='logo.svg'">
                </div>
                <div class="title-group">
                    <h1 class="main-title">ุฃูุช ูุญุธู</h1>
                    <p class="subtitle">ูุนุจุฉ ุชูุงุนููุฉ ูุน ุงููุดุงูุฏูู</p>
                </div>
            </div>
        </header>

        <!-- Setup Section -->
        <section class="setup-section" id="setupSection">
            <div class="setup-card">
                <h2 class="section-title">ุงุจุฏุฃ ุงููุนุจ ูุน ูุชุงุจุนููู</h2>
                <div class="auth-options">
                    <!-- Easy OAuth Method -->
                    <div class="auth-method recommended">
                        <div class="method-badge">โก ููุตู ุจู</div>
                        <h3 class="method-title">ุชุณุฌูู ุฏุฎูู ุณุฑูุน</h3>
                        <p class="method-description">ุณุฌู ุฏุฎูู ุจุญุณุงุจ Twitch ุงูุฎุงุต ุจู ูุจุงุดุฑุฉู - ูุง ุญุงุฌุฉ ููุณุฎ ุฃู ุฑููุฒ!</p>
                        <button class="btn-primary btn-twitch" id="twitchLoginBtn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-left: 10px;">
                                <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"/>
                            </svg>
                            ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Twitch
                        </button>
                    </div>

                    <!-- Manual Token Method -->
                    <div class="auth-method">
                        <h3 class="method-title">ุงูุทุฑููุฉ ุงููุฏููุฉ (ูููุชูุฏููู)</h3>
                        <p class="method-description">ุฅุฐุง ููุช ุชูุถู ุงุณุชุฎุฏุงู ุชููู ุฎุงุต ุฃู ุจูุช ูููุตู</p>
                        <button class="btn-secondary" id="showManualBtn">ุงุณุชุฎุฏุงู ุชููู ูุฏูู</button>
                        
                        <div class="manual-form hidden" id="manualForm">
                            <div class="form-group">
                                <label for="channelName">ุงุณู ุงูููุงุฉ</label>
                                <input type="text" id="channelName" placeholder="ุงุณู ููุงุชู">
                            </div>
                            <div class="form-group">
                                <label for="botToken">OAuth Token</label>
                                <input type="password" id="botToken" placeholder="oauth:xxxxxxxxxxxxxxxxxxxxxx">
                                <small class="help-text">ุงุญุตู ุนููู ูู <a href="https://twitchapps.com/tmi/" target="_blank">twitchapps.com/tmi</a></small>
                            </div>
                            <button class="btn-primary" id="connectBtn">ุงุชุตุงู</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Game Section -->
        <section class="game-section hidden" id="gameSection">
            <div class="connection-status">
                <span class="status-indicator" id="statusIndicator"></span>
                <span id="statusText">ูุชุตู ุจููุงุฉ: <strong id="connectedChannel"></strong></span>
                <button class="btn-disconnect" id="disconnectBtn">ูุทุน ุงูุงุชุตุงู</button>
            </div>

            <!-- Question Setup -->
            <div class="question-setup-card">
                <h2 class="section-title">ุฅุนุฏุงุฏ ุงูุณุคุงู</h2>
                
                <div class="form-group">
                    <label for="questionText">ุงูุณุคุงู</label>
                    <input type="text" id="questionText" placeholder="ูุซุงู: ุงุฐูุฑ ุฏููุฉ ุฎููุฌูุฉ">
                </div>

                <div class="form-group">
                    <label for="gameMode">ููุน ุงููุนุจุฉ</label>
                    <div class="mode-selector">
                        <button class="mode-btn active" data-mode="match">
                            <span class="mode-icon">โ</span>
                            <span class="mode-label">ูุทุงุจูุฉ ุฅุฌุงุจุชู</span>
                            <small>ูู ููุชุจ ููุณ ุฅุฌุงุจุชู ูููุฒ</small>
                        </button>
                        <button class="mode-btn" data-mode="avoid">
                            <span class="mode-icon">โ</span>
                            <span class="mode-label">ุชุฌูุจ ุฅุฌุงุจุชู</span>
                            <small>ูู ููุชุจ ุฅุฌุงุจุฉ ูุฎุชููุฉ ูููุฒ</small>
                        </button>
                        <button class="mode-btn" data-mode="colors">
                            <span class="mode-icon">๐จ</span>
                            <span class="mode-label">ูุธุงู ุงูุฃููุงู</span>
                            <small>ุฃุญูุฑ(-1)ุ ุฃุตูุฑ(0)ุ ุฃุฎุถุฑ(+1)</small>
                        </button>
                    </div>
                </div>

                <div id="answersContainer">
                    <div class="form-group">
                        <label>ุฅุฌุงุจุงุชู ุงูุณุฑูุฉ</label>
                        <div id="answersList">
                            <div class="answer-input-group">
                                <input type="text" class="answer-input" placeholder="ุงูุฅุฌุงุจุฉ ุงูุฃููู" data-type="neutral">
                                <select class="answer-type">
                                    <option value="match">ุฃุฎุถุฑ (+1)</option>
                                    <option value="neutral" selected>ุฃุตูุฑ (0)</option>
                                    <option value="avoid">ุฃุญูุฑ (-1)</option>
                                </select>
                                <button class="btn-remove-answer" style="display:none;">ร</button>
                            </div>
                        </div>
                        <button class="btn-secondary" id="addAnswerBtn">+ ุฅุถุงูุฉ ุฅุฌุงุจุฉ</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="gameDuration">ูุฏุฉ ุงูุฌููุฉ (ุจุงูุซูุงูู)</label>
                    <input type="number" id="gameDuration" value="30" min="10" max="120">
                </div>

                <button class="btn-primary btn-large" id="startGameBtn">ุจุฏุก ุงูุฌููุฉ</button>
            </div>

            <!-- Active Game Display -->
            <div class="active-game-card hidden" id="activeGameCard">
                <div class="game-header">
                    <h3 class="game-question" id="activeQuestion"></h3>
                    <div class="timer-display">
                        <svg class="timer-circle" width="80" height="80">
                            <circle class="timer-bg" cx="40" cy="40" r="35"></circle>
                            <circle class="timer-progress" cx="40" cy="40" r="35" id="timerCircle"></circle>
                        </svg>
                        <span class="timer-text" id="timerText">30</span>
                    </div>
                </div>

                <div class="participants-section">
                    <h4 class="participants-title">ุงููุดุงุฑููู (<span id="participantCount">0</span>)</h4>
                    <div class="participants-list" id="participantsList"></div>
                </div>

                <button class="btn-danger" id="endGameBtn">ุฅููุงุก ุงูุฌููุฉ</button>
            </div>

            <!-- Results Display -->
            <div class="results-card hidden" id="resultsCard">
                <h3 class="section-title">ูุชุงุฆุฌ ุงูุฌููุฉ</h3>
                <div class="correct-answers" id="correctAnswers"></div>
                <div class="results-list" id="resultsList"></div>
                <button class="btn-primary" id="newRoundBtn">ุฌููุฉ ุฌุฏูุฏุฉ</button>
            </div>

            <!-- Leaderboard -->
            <div class="leaderboard-card">
                <h3 class="section-title">ููุญุฉ ุงููุชุตุฏุฑูู</h3>
                <div class="leaderboard-list" id="leaderboardList">
                    <div class="empty-state">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุนุฏ</div>
                </div>
                <button class="btn-secondary" id="resetLeaderboardBtn">ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท</button>
            </div>
        </section>
    </div>

    <script src="tmi.min.js"></script>
    <script>
        // Check if tmi.js loaded, if not try alternative CDN
        if (typeof tmi === 'undefined') {
            console.error('Failed to load tmi.js from jsdelivr, trying alternative...');
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/tmi.js@1.8.5/dist/tmi.min.js';
            script.onerror = function() {
                console.error('Failed to load tmi.js from all sources');
                alert('ูุดู ุชุญููู ููุชุจุฉ ุงูุงุชุตุงู ุจู Twitch. ูุฑุฌู ุงูุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช ุฃู ุงููุญุงููุฉ ูุงุญูุงู.');
            };
            document.head.appendChild(script);
        }
    </script>
    <script src="app.js"></script>
</body>
</html>
